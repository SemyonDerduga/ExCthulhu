import click
from cthulhu_src.actions.forecast import run as run_cmd


@click.command()
@click.option("--prices", required=True, help="Список цен через запятую")
@click.option(
    "--horizons",
    default="1,5,15,60",
    help="Горизонты прогнозирования через запятую (в минутах)",
)
@click.option("--lookback", default=60, type=int, help="Окно для анализа исторических данных")
@click.option(
    "--methods",
    default="mean",
    help="Методы прогнозирования через запятую (mean, median, ema, arima)",
)
@click.pass_context
def forecast(ctx, prices: str, horizons: str, lookback: int, methods: str) -> None:
    """
    Рассчитать базовые прогнозы цен на основе исторических данных.
    
    Эта команда использует различные методы для прогнозирования будущих цен:
    
    **Методы прогнозирования:**
    - mean: Среднее значение за период
    - median: Медианное значение за период  
    - ema: Экспоненциальное скользящее среднее
    - arima: Авторегрессионная модель (ARIMA)
    
    **Параметры:**
    - prices: Список исторических цен через запятую
    - horizons: Временные горизонты для прогноза (в минутах)
    - lookback: Количество исторических точек для анализа
    - methods: Методы прогнозирования
    
    **Примеры:**
        python -m cthulhu_src.main forecast --prices 100,101,102,103 --horizons 1,5
        python -m cthulhu_src.main forecast --prices 100,101,102,103 --methods mean,ema,arima
        python -m cthulhu_src.main forecast --prices 100,101,102,103 --lookback 30
    """
    run_cmd(ctx, prices, horizons, lookback, methods)
